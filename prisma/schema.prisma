generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Link {
  id          String   @id @default(uuid())
  shortCode   String   @unique
  originalUrl String
  title       String?
  description String?
  imageUrl    String?
  createdAt   DateTime @default(now())
  clicks      Int      @default(0)
  
  // Analytics could be a separate table, but simple count is in PRD requirements initially
  // "Track click analytics" -> usually implies more than just a count, but let's start simple
  // PRD says "Analytics dashboard (clicks, platforms, geographic data)"
  // So we need a separate Analytics model
  analytics   Analytics[]
}

model Analytics {
  id        String   @id @default(uuid())
  linkId    String
  link      Link     @relation(fields: [linkId], references: [id])
  userAgent String?
  platform  String?  // Facebook, Twitter, etc.
  ip        String?  // For geo (hashed or raw)
  createdAt DateTime @default(now())
}
